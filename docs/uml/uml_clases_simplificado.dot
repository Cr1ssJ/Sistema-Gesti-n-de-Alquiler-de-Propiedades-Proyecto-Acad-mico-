
digraph G {
    rankdir=LR;
    node [shape=record, fontname="Helvetica"];

    subgraph cluster_propiedades {
        label="Módulo Propiedades";
        color=lightgrey;
        Propiedad [label="{Propiedad| -id:String\l -tipo:Tipo\l -direccion:Direccion\l -servicios:List<ServicioIncluido>\l | +agregarServicio():void\l}"];
        Direccion [label="{Direccion| +ciudad:String\l +barrio:String\l +calle:String\l +numero:String\l | +getFormatoCorto():String\l}"];
        ServicioIncluido [label="{ServicioIncluido| -tipo:Tipo\l -incluido:boolean\l | }"];
    }

    subgraph cluster_personas {
        label="Módulo Personas";
        color=lightgrey;
        Usuario [label="{Usuario| #id:String\l #nombreUsuario:String\l #rol:String\l | +tieneRol(r:String):boolean\l}"];
        Administrador [label="{Administrador| (hereda Usuario)\l | }"];
        Inquilino [label="{Inquilino| -id:String\l -nombre:String\l -email:String\l -telefono:String\l | }"];
        Propietario [label="{Propietario| -id:String\l -nombre:String\l -email:String\l | }"];
        Tecnico [label="{Tecnico| -id:String\l -nombre:String\l -especialidad:String\l | }"];
    }

    subgraph cluster_contratos {
        label="Módulo Contratos y Pagos";
        color=lightgrey;
        ContratoAlquiler [label="{ContratoAlquiler| -id:String\l -propiedad:Propiedad\l -inquilino:Inquilino\l -montoMensual:double\l -estado:Estado\l | +registrarPago(p:Pago):void\l}"];
        Pago [label="{Pago| -id:String\l -contratoId:String\l -fechaPago:LocalDate\l -monto:double\l | }"];
        PlanPago [label="{PlanPago| -contratoId:String\l -proximoVencimiento:LocalDate\l -diaCorte:int\l | }"];
    }

    subgraph cluster_mantenimiento {
        label="Módulo Mantenimiento y Soporte";
        color=lightgrey;
        SolicitudMantenimiento [label="{SolicitudMantenimiento| -id:String\l -propiedad:Propiedad\l -descripcion:String\l -estado:Estado\l | +asignarTecnico():void\l +marcarResuelta():void\l}"];
        Notificacion [label="{Notificacion| -id:String\l -usuarioId:String\l -mensaje:String\l -fecha:LocalDateTime\l | +marcarLeida():void\l}"];
    }

    subgraph cluster_reportes {
        label="Módulo Reportes";
        color=lightgrey;
        GestorReportes [label="{GestorReportes| | +generarReportePorUbicacion():void\l +generarReportePorTipoPropiedad():void\l}"];
    }

    # Relaciones simples
    Propiedad -> Direccion [arrowhead=none];
    Propiedad -> ServicioIncluido [arrowhead=vee, label="*"];
    ContratoAlquiler -> Propiedad [arrowhead=none];
    ContratoAlquiler -> Inquilino [arrowhead=none];
    ContratoAlquiler -> Pago [arrowhead=vee, label="*"];
    SolicitudMantenimiento -> Propiedad [arrowhead=none];
    SolicitudMantenimiento -> Tecnico [style=dashed];
    Notificacion -> Usuario [style=dashed, label="destinatario"];
    Administrador -> Usuario [arrowhead=empty];
}
